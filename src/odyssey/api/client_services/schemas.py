from marshmallow import Schema, fields, validate

class NewRemoteRegisterUserSchema(Schema):
    """
    Schema design for creating a new client as a client_services staff member
    No password is required because the password is generated by the backend and
    returned directly to the new user
    """
    
    firstname = fields.String(required=True)
    middlename = fields.String()
    lastname = fields.String(required=True)
    email = fields.Email(validate=validate.Length(min=0, max=50), required=True)
    phone_number = fields.String(validate=validate.Length(min=0, max=50))
    user_type = fields.String(description="The type of user being registered. Must be either 'client' or 'staff'", 
                    validate=(validate.OneOf(('client','staff'))), required=True)


class NewUserRegistrationPortalSchema(Schema):
    """
    Response from client services user registration endpoint
    In practice, only an email will be sent to the new user containing their
    password and registration portal
    """
    password = fields.String(description='auto-generated password for new user registration')
    registration_portal_url = fields.String(description='URL with registration portal_id as parameter')
    portal_id = fields.String()
