stages:
  - build
  - test
  - version
  - deploy

pages:
  stage: build
  script:
    - echo 'Nothing to do...'
  tags:
    - gitlab-runner
  artifacts:
    paths:
      - public
  only:
    - master

test:
  stage: test
  script:
    - echo "Running tests."
    - bash ~/test_odyssey.sh
  only:
    - merge_requests
  tags:
    - shared

version:
  stage: version
  script:
    - echo "Checking version"
    - bash ~/check_version.sh
  only:
    - master
  tags:
    - shared

deploy:
  stage: deploy
  script:
    - echo "Deploying update."
    - bash ~/dev_odyssey.sh
  only:
    - master
  tags:
    - shared